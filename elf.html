<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elf Workshop: Calm-Down Training</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        body { 
            font-family: 'Arial Rounded MT Bold', sans-serif; 
            background: linear-gradient(135deg, #165b33 0%, #0b3d1f 100%); 
            color: white; text-align: center; padding: 20px; overflow-x: hidden;
        }
        .snow { position: fixed; top: 0; left: 0; pointer-events: none; z-index: -1; font-size: 2rem; }

        .game-card { 
            background: white; border-radius: 50px; padding: 40px; 
            max-width: 750px; margin: auto; color: #333;
            border: 10px solid #f8b229; box-shadow: 0 20px 0 #d42426;
        }
        #elf-img { width: 220px; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.2)); }
        
        .question { font-size: 2.2rem; color: #d42426; margin: 20px 0; font-weight: 900; line-height: 1.2; min-height: 100px;}
        
        .tool-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        
        .tool-btn { 
            padding: 20px; font-size: 1.4rem; border: none; border-radius: 25px; 
            cursor: pointer; transition: all 0.2s; font-weight: bold;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 5px #ccc;
        }
        .tool-btn:active { transform: translateY(4px); box-shadow: none; }
        .tool-btn span { font-size: 3rem; margin-bottom: 5px; }

        /* Helpful Colors */
        .good { background: #4CAF50; color: white; } /* Green */
        .bad { background: #f44336; color: white; } /* Red */
        
        .back-home { margin-top: 40px; display: inline-block; color: white; font-size: 1.5rem; text-decoration: none; border-bottom: 2px dashed white; }
    </style>
</head>
<body>

    <div class="snow">‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è ‚ùÑÔ∏è</div>

    <div class="game-card animate__animated animate__bounceInDown">
        <img src="elf_character.jpg" id="elf-img" class="animate__animated animate__pulse animate__infinite" alt="Elf">
        <div class="question" id="display-q">The toy tower FELL OVER! üß±<br>What's the best tool to stay calm?</div>
        
        <div class="tool-grid" id="tool-grid">
            </div>
    </div>

    <a href="index.html" class="back-home">‚¨Ö Go Back to Map</a>

<script>
    let missionNumber = 0;

    const missions = [
        {
            q: "The toy tower FELL OVER! üß±<br>What's the best tool to stay calm?",
            options: [
                { text: "Belly Breath", icon: "üå¨Ô∏è", type: "good", feedback: "Great choice! Breathing helps our engine slow down." },
                { text: "Scream at Everyone", icon: "üì¢", type: "bad", feedback: "Oh no! Screaming makes the workshop too loud and doesn't fix the tower." }
            ]
        },
        {
            q: "Someone took your paintbrush! üé®<br>What should you do?",
            options: [
                { text: "Take theirs instead", icon: "üñåÔ∏è", type: "bad", feedback: "Wait! Taking things back just starts a fight. That's not helpful." },
                { text: "Ask for help", icon: "ü§ù", type: "good", feedback: "Smart! Asking an adult or a friend for help is a pro tool." }
            ]
        },
        {
            q: "It's too LOUD in the workshop! üî®<br>How can the Elf feel better?",
            options: [
                { text: "Get Headphones", icon: "üéß", type: "good", feedback: "Perfect! Protecting your ears helps you stay in the Green Zone." },
                { text: "Sit and Cry", icon: "üò≠", type: "bad", feedback: "It's okay to feel sad, but crying won't block the noise. Let's try a tool." }
            ]
        },
        {
            q: "The paint spilled on your shoes! üëü<br>Quick! What do you do?",
            options: [
                { text: "Have a stretch", icon: "üôÜ‚Äç‚ôÇÔ∏è", type: "good", feedback: "Yes! Moving your body helps let go of that 'Uh-Oh' feeling." },
                { text: "Kick the paint bucket", icon: "ü™£", type: "bad", feedback: "Whoops! Now there is an even bigger mess to clean up!" }
            ]
        }
    ];

    function loadMission() {
        if (missionNumber < missions.length) {
            const m = missions[missionNumber];
            document.getElementById('display-q').innerHTML = m.q;
            const grid = document.getElementById('tool-grid');
            grid.innerHTML = ""; // Clear old buttons

            m.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = `tool-btn ${opt.type === 'good' ? 'good' : 'bad'}`;
                btn.innerHTML = `<span>${opt.icon}</span>${opt.text}`;
                btn.onclick = () => handleChoice(opt);
                grid.appendChild(btn);
            });
        } else {
            Swal.fire({
                title: 'Workshop Master! üèÜ',
                text: 'You know which tools help and which ones make things harder!',
                icon: 'success',
                confirmButtonText: 'Back to Map'
            }).then(() => {
                window.location.href = 'index.html';
            });
        }
    }

    function handleChoice(opt) {
        if (opt.type === 'good') {
            Swal.fire({
                title: 'Helpful Tool! ‚ú®',
                text: opt.feedback,
                icon: 'success',
                confirmButtonColor: '#4CAF50'
            }).then(() => {
                missionNumber++;
                loadMission();
            });
        } else {
            Swal.fire({
                title: 'Not quite...',
                text: opt.feedback,
                icon: 'error',
                confirmButtonText: 'Try a better tool',
                confirmButtonColor: '#f44336'
            });
        }
    }

    // Start the game
    loadMission();
</script>
</body>
</html>
